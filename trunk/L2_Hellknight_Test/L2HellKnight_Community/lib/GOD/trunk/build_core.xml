<?xml version="1.0" encoding="UTF-8"?>
<project name="L2_Revolt_Team_Core" default="dist" basedir=".">
	<description> Boston, MA
		02111-1307, USA.

		http://www.gnu.org/copyleft/gpl.html

	</description>

	<property name="src" location="java"/>
	<property name="lib" location="lib"/>
	<property name="build" location="build_core"/>
	<property name="build.classes" location="${build}/classes"/>

	<path id="classpath">
		<fileset dir="${lib}">
			<include name="*.jar"/>
		</fileset>
	</path>

	<target name="dist">
		<delete dir="${build}"/>
		<mkdir dir="${build}"/>
		<mkdir dir="${build.classes}"/>

		<javac destdir="${build.classes}"
			   optimize="on"
			   debug="on"
			   source="1.6"
			   target="1.6"
			   encoding="UTF-8"
			   includeantruntime="false"
			   nowarn="on">
			<compilerarg value="-Xlint:all"></compilerarg>
			<src path="${src}"/>
			<classpath refid="classpath"/>
		</javac>

		<exec dir="." executable="svnversion" outputproperty="l2rt.revision"
			  failifexecutionfails="false">
			<arg line="-n ."/>
		</exec>

		<tstamp>
			<format property="build.tstamp"
					pattern="yyyy.MM.dd HH:mm"/>
		</tstamp>

		<concat destfile="${build}/classes/l2rt/l2rt-version.properties">
            version=${l2rt.revision}
            builddate=${build.tstamp}
            user=${user.name} ${user.dir} ${user.timezone}
            os=${os.name} ${os.version} ${os.arch}
            java=${java.version} ${java.vendor}
            vm=${java.vm.name} ${java.vm.version}
        </concat>

		<jar destfile="${build}/l2rtserver.jar" level="0">
			<fileset dir="${build.classes}"/>
			<manifest>
				<attribute name="Main-Class" value="l2rt.Server"/>
				<attribute name="Class-Path" value=". c3p0-0.9.1.2.jar jacksum.jar mysql-connector-java-bin.jar javolution.jar commons-logging.jar tools.jar"/>
			</manifest>
		</jar>

		<delete dir="${build.classes}" />
	</target>
</project>